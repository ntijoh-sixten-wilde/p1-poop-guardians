<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        .quarters{
            border: white solid;
            height: 200px;
            width: 200px;
            position: relative;
        }

        .blur_both{
            backdrop-filter: blur(3px);
            filter: blur(3px);            
        }
    </style>
</head>
<body>
    <div id="pizza_base" style="background-image: url(bild/pizza_grund.png); width: 400px; height: 400px; display: grid; grid-template-columns: repeat(2, 1fr);">
        
        <div id="north_west" class="quarters">
            <!-- <img style="width: 66px; position: absolute; right: 0px; bottom: 0px; background-color: aqua; object-fit:cover; aspect-ratio: 1/1;" src="bild/korv.png" alt="">
            <img style="width: 100px; position: absolute; right: 50px; bottom: 0px;" src="bild/korv.png" alt="">
            <img id="test_item" style="position: absolute; right: 0px; bottom: 50px;" src="bild/korv.png" alt=""> -->
        </div>

        <div id="north_east" class="quarters">
          
        </div>

         <div id="south_west" class="quarters">
           
        </div>

        <div id="south_east" class="quarters">
        
        </div>
    </div>

    <button id="add_sausage" style="margin-top: 10px;"> l√§gg till korv </button>
    <button id="remove_sausage" style="margin-top: 10px;"> ta bort korv </button>

    <script>


        // function pixel_increase(pixels, increase){return parseInt(pixels) + increase + "px"}
        function random_int(max){ return Math.floor( Math.random() * (max+1) ) }

        toppings_q0 = {
            sausage: [0, "bild/korv.png"],
            ham: [0, "bild/skinka.jpeg"]
        }
        toppings_q1 = {
            sausage: [0, "bild/korv.png"],
            ham: [0, "bild/skinka.jpeg"]
        }
        toppings_q2 = {
            sausage: [0, "bild/korv.png"],
            ham: [0, "bild/skinka.jpeg"]
        }
        toppings_q3 = {
            sausage: [0, "bild/korv.png"],
            ham: [0, "bild/skinka.jpeg"]
        }
        
        toppings = [toppings_q0, toppings_q1, toppings_q2, toppings_q3]
        
        quarters = Array.from( document.getElementsByClassName("quarters") )
        
        function circle_math(crust = 10000){
            ratio = 123
            
            x = random_int(ratio) - random_int(ratio * 0.1)
            y = random_int(ratio) - random_int(ratio * 0.1)
            xy = x**2 + y**2
            
            console.log(xy)
            
            if (xy <= crust){
                return [x,y]
            }
            
            if (xy > crust){
                return circle_math()
            }
        }
        
        
        function create_topping(source, corner){
            
            topping_img = document.createElement('img')
            topping_img.src = source
            
            
            // topping_class = document.getElementsByClassName("topping_class")
            
            // Array.from(topping_class).forEach(individual_topping => {
                //     console.log(individual_topping)
                // });
                
                topping_img.style = "position: absolute; object-fit:cover; aspect-ratio: 1/1; width: 33px; opacity: 80%"
                
                
                if (corner == 0){
                    topping_img.classList.add("topping_class_0")
                    xy_list = circle_math(15*10**3)
                    topping_img.style.right = xy_list[0]  + "px"
                    topping_img.style.bottom = xy_list[1]  + "px"
                }
                
                if (corner == 1){
                    topping_img.classList.add("topping_class_1")
                    xy_list = circle_math(15*10**3)
                    topping_img.style.left = xy_list[0]  + "px"
                    topping_img.style.bottom = xy_list[1]  + "px"
                }
                
                if (corner == 2){
                    topping_img.classList.add("topping_class_2")
                    xy_list = circle_math(10*10**3)
                    topping_img.style.right = xy_list[0]  + "px"
                    topping_img.style.top = xy_list[1]  + "px"
                }
                
                if (corner == 3){
                    topping_img.classList.add("topping_class_3")
                    xy_list = circle_math(10*10**3)
                    topping_img.style.left = xy_list[0]  + "px"
                    topping_img.style.top = xy_list[1]  + "px"
                }
                
                
                return topping_img
                
            }
            
            topping_class_0 = document.getElementsByClassName("topping_class_0")
            topping_class_1 = document.getElementsByClassName("topping_class_1")
            topping_class_2 = document.getElementsByClassName("topping_class_2")
            topping_class_3 = document.getElementsByClassName("topping_class_3")
    
            topping_class = [topping_class_0, topping_class_1, topping_class_2, topping_class_3]

            function add_topping(source, corner, ammount){
            
            if (ammount < 3 && !quarters[corner].classList.contains("blur_both") ) {
                
                
                toppings[corner].sausage[0] += 1
                
                for (let i = 0; i < 3; i++) {
                    quarters[corner].appendChild(create_topping(source, corner))
                }
                
                // console.log("sausage ", toppings[corner].sausage[0])
            }
        }
        
        function remove_topping(source, corner, ammount){
            
            
            
            if (ammount > 0 && !quarters[corner].classList.contains("blur_both") ){

                
                removed = 0
                i = 0
                
                while (removed < 3){
                    
                    if (topping_class[corner][i].src.includes(source)){
                        topping_class[corner][i].remove()
                        removed += 1

                    } else{ i += 1 }
                    
                };
                ammount -= 1

                
                
                
            }
            return(ammount)
        }
        
        // for (let i = 0; i < toppings.sausage[0]; i++) {
            
        //     // add_topping(toppings.ham[1], 0)
        
        document.getElementById("add_sausage").onclick = () => {
            
            add_topping(toppings[0].sausage[1], 0, toppings[0].sausage[0])
            add_topping(toppings[1].sausage[1], 1, toppings[1].sausage[0])
            add_topping(toppings[2].sausage[1], 2, toppings[2].sausage[0])
            add_topping(toppings[3].sausage[1], 3, toppings[3].sausage[0])
        }
        
        
        document.getElementById("remove_sausage").onclick = () => {
            
            toppings[0].sausage[0] = remove_topping(toppings[0].sausage[1], 0, toppings[0].sausage[0])
            // console.log("sausage ", toppings[0].sausage[0])
            
            // toppings[0].sausage[0] = ammount

            toppings[1].sausage[0] = remove_topping(toppings[1].sausage[1], 1, toppings[1].sausage[0])
            // toppings[1].sausage[0] = ammount

            toppings[2].sausage[0] = remove_topping(toppings[2].sausage[1], 2, toppings[2].sausage[0])
            // toppings[2].sausage[0] = ammount

            toppings[3].sausage[0] = remove_topping(toppings[3].sausage[1], 3, toppings[3].sausage[0])
            // toppings[3].sausage[0] = ammount
        }

        quarters.forEach(quarter => {
            console.log(quarter)
            quarter.addEventListener('click', () => {select(quarter)} )
        });

        function select(quarter){
            console.log(quarter.classList)
    
            if (quarter.classList.contains("blur_both")){
                quarter.classList.remove("blur_both")
            }
            else {
                quarter.classList.add("blur_both")
            }
    
        }
        
        

    </script>

</body>
</html>